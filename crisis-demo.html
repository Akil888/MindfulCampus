<!DOCTYPE html>
<html>
<head>
    <title>MindfulCampus - Crisis Intervention Sequence</title>
    <style>
        body { 
            font-family: Arial; 
            background: linear-gradient(135deg, #667eea, #764ba2); 
            color: white; 
            padding: 20px; 
            margin: 0;
        }
        .demo-container { 
            max-width: 900px; 
            margin: 0 auto; 
        }
        .crisis-monitor { 
            background: rgba(255,255,255,0.1); 
            padding: 25px; 
            border-radius: 15px; 
            margin: 20px 0; 
            border: 1px solid rgba(255,255,255,0.2);
        }
        .score-display { 
            font-size: 56px; 
            font-weight: bold; 
            text-align: center; 
            margin: 20px 0; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .low-risk { color: #4CAF50; }
        .medium-risk { color: #FF9800; }
        .high-risk { color: #f44336; }
        .critical-risk { 
            color: #d32f2f; 
            animation: pulse 1s infinite; 
        }
        .typing-area { 
            width: 100%; 
            padding: 20px; 
            font-size: 18px; 
            border-radius: 12px; 
            border: none; 
            margin: 20px 0; 
            background: rgba(255,255,255,0.9);
            color: #333;
        }
        .intervention-sequence {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 350px;
            z-index: 10000;
        }
        .alert-step {
            background: #1a1d29;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.5s ease;
        }
        .alert-step.show {
            transform: translateX(0);
            opacity: 1;
        }
        .alert-step.critical {
            border-color: #f44336;
            background: linear-gradient(135deg, #d32f2f, #b71c1c);
            animation: alertPulse 1s infinite;
        }
        .alert-step.success {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #4CAF50, #388E3C);
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #f44336);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }
        .metrics-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .metric-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .step-indicator {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        .step-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 14px;
            font-weight: bold;
        }
        .step-pending { background: #666; }
        .step-active { background: #FF9800; animation: spin 1s linear infinite; }
        .step-complete { background: #4CAF50; }
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }
        @keyframes alertPulse {
            0% { box-shadow: 0 8px 25px rgba(244,67,54,0.3); }
            50% { box-shadow: 0 8px 35px rgba(244,67,54,0.6); }
            100% { box-shadow: 0 8px 25px rgba(244,67,54,0.3); }
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .countdown {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
        }
        .demo-controls {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>ðŸ§  MindfulCampus - Crisis Intervention Demo</h1>
        <p><strong>For Judges:</strong> Watch our AI detect and prevent a mental health crisis in real-time</p>
        
        <div class="crisis-monitor">
            <h2>ðŸš¨ AI Crisis Detection Monitor</h2>
            
            <div class="score-display" id="crisis-score">
                <span id="score-number" class="low-risk">25</span>
                <div style="font-size: 18px; margin-top: 10px;" id="risk-level">LOW RISK - NORMAL</div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <div class="metrics-row">
                <div class="metric-card">
                    <div style="font-size: 24px;" id="ai-confidence">65%</div>
                    <div style="font-size: 12px;">AI Confidence</div>
                </div>
                <div class="metric-card">
                    <div style="font-size: 24px;" id="response-time">--</div>
                    <div style="font-size: 12px;">Response Time</div>
                </div>
                <div class="metric-card">
                    <div style="font-size: 24px;" id="keywords-detected">0</div>
                    <div style="font-size: 12px;">Crisis Keywords</div>
                </div>
                <div class="metric-card">
                    <div style="font-size: 24px;" id="intervention-status">MONITORING</div>
                    <div style="font-size: 12px;">Status</div>
                </div>
            </div>
        </div>
        
        <div class="crisis-monitor">
            <h3>ðŸ’¬ Student Text Simulation</h3>
            <textarea 
                id="typing-area" 
                class="typing-area" 
                placeholder="Type to simulate student distress... Or use demo scenarios below"
                oninput="analyzeText()"
            ></textarea>
            
            <div class="demo-controls">
                <h4>ðŸŽ­ Demo Scenarios</h4>
                <button onclick="runCrisisDemo()" style="background: #f44336; color: white; border: none; padding: 15px 25px; margin: 10px; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold;">
                    ðŸš¨ Trigger Crisis Scenario
                </button>
                <button onclick="resetDemo()" style="background: #666; color: white; border: none; padding: 15px 25px; margin: 10px; border-radius: 8px; cursor: pointer; font-size: 16px;">
                    ðŸ”„ Reset Demo
                </button>
            </div>
        </div>
    </div>

    <!-- Crisis Intervention Sequence Alerts -->
    <div class="intervention-sequence" id="intervention-sequence"></div>

    <script>
        let crisisScore = 25;
        let interventionSteps = [
            { id: 'detection', title: 'Crisis Detected', status: 'pending' },
            { id: 'counselor', title: 'Counselor Notified', status: 'pending' },
            { id: 'peer', title: 'Peer Support Activated', status: 'pending' },
            { id: 'contact', title: 'Emergency Contact', status: 'pending' },
            { id: 'response', title: 'Help Dispatched', status: 'pending' },
            { id: 'resolution', title: 'Crisis Prevented', status: 'pending' }
        ];
        
        function updateCrisisScore(score) {
            crisisScore = Math.min(score, 100);
            const scoreElement = document.getElementById('score-number');
            const levelElement = document.getElementById('risk-level');
            const progressFill = document.getElementById('progress-fill');
            const confidenceElement = document.getElementById('ai-confidence');
            
            scoreElement.textContent = Math.round(crisisScore);
            progressFill.style.width = crisisScore + '%';
            confidenceElement.textContent = Math.min(crisisScore * 1.2, 100).toFixed(0) + '%';
            
            // Update risk level and colors
            if (crisisScore >= 85) {
                scoreElement.className = 'critical-risk';
                levelElement.textContent = 'CRITICAL RISK - INTERVENTION REQUIRED';
                levelElement.style.color = '#d32f2f';
            } else if (crisisScore >= 70) {
                scoreElement.className = 'high-risk';
                levelElement.textContent = 'HIGH RISK - MONITORING ACTIVE';
                levelElement.style.color = '#f44336';
            } else if (crisisScore >= 50) {
                scoreElement.className = 'medium-risk';
                levelElement.textContent = 'MEDIUM RISK - WATCH MODE';
                levelElement.style.color = '#FF9800';
            } else {
                scoreElement.className = 'low-risk';
                levelElement.textContent = 'LOW RISK - NORMAL';
                levelElement.style.color = '#4CAF50';
            }
        }
        
        function analyzeText() {
            const text = document.getElementById('typing-area').value.toLowerCase();
            const crisisKeywords = [
                'hopeless', 'suicide', 'kill myself', 'end it all', 'worthless',
                'can\'t handle', 'overwhelmed', 'give up', 'no point', 'hate myself',
                'better off dead', 'pointless', 'alone', 'nobody cares'
            ];
            
            let score = 25;
            let keywordCount = 0;
            
            crisisKeywords.forEach(keyword => {
                if (text.includes(keyword)) {
                    score += keyword === 'suicide' || keyword === 'kill myself' ? 30 : 15;
                    keywordCount++;
                }
            });
            
            if (text.length > 50) score += 10;
            if (text.includes('everything') && text.includes('falling apart')) score += 20;
            
            updateCrisisScore(score);
            document.getElementById('keywords-detected').textContent = keywordCount;
            
            if (score >= 75) {
                triggerInterventionSequence();
            }
        }
        
        function runCrisisDemo() {
            resetDemo();
            const crisisText = "I can't handle this anymore. Everything is falling apart and I feel completely hopeless. Maybe everyone would be better off without me. I don't see the point in continuing.";
            const textArea = document.getElementById('typing-area');
            
            // Simulate realistic typing
            let index = 0;
            const typeInterval = setInterval(() => {
                if (index < crisisText.length) {
                    textArea.value += crisisText[index];
                    analyzeText();
                    index++;
                } else {
                    clearInterval(typeInterval);
                }
            }, 80);
        }
        
        function triggerInterventionSequence() {
            document.getElementById('intervention-status').textContent = 'CRISIS DETECTED';
            
            // Step 1: Crisis Detection Alert
            setTimeout(() => showAlert('detection', {
                icon: 'ðŸš¨',
                title: 'CRISIS DETECTED',
                message: 'High-risk student identified\nRisk Score: 87/100\nConfidence: 94%',
                type: 'critical'
            }), 500);
            
            // Step 2: AI Analysis
            setTimeout(() => showAlert('analysis', {
                icon: 'ðŸ¤–',
                title: 'AI ANALYSIS COMPLETE',
                message: 'Keywords: hopeless, worthless, better off\nTyping pattern: Erratic\nThreat Level: IMMEDIATE',
                type: 'critical'
            }), 1500);
            
            // Step 3: Counselor Notification
            setTimeout(() => {
                showAlert('counselor', {
                    icon: 'ðŸ‘¨â€âš•ï¸',
                    title: 'COUNSELOR NOTIFIED',
                    message: 'Dr. Sarah Chen - Crisis Specialist\nStatus: Alert received\nETA: 2.3 minutes',
                    type: 'critical'
                });
                updateInterventionStep('counselor', 'active');
            }, 3000);
            
            // Step 4: Peer Support Activation
            setTimeout(() => {
                showAlert('peer', {
                    icon: 'ðŸ¤',
                    title: 'PEER SUPPORT ACTIVATED',
                    message: 'Anonymous peer counselor\nStatus: Connecting...\nChat session initiated',
                    type: 'critical'
                });
                updateInterventionStep('counselor', 'complete');
                updateInterventionStep('peer', 'active');
            }, 5000);
            
            // Step 5: Emergency Contact
            setTimeout(() => {
                showAlert('emergency', {
                    icon: 'ðŸ“ž',
                    title: 'EMERGENCY PROTOCOLS',
                    message: 'Campus security notified\nEmergency contacts alerted\nLocation services activated',
                    type: 'critical'
                });
                updateInterventionStep('peer', 'complete');
                updateInterventionStep('contact', 'active');
            }, 7000);
            
            // Step 6: Help Dispatched
            setTimeout(() => {
                showAlert('dispatch', {
                    icon: 'ðŸš‘',
                    title: 'HELP DISPATCHED',
                    message: 'Crisis team en route\nCounselor calling student\nPeer chat active',
                    type: 'critical'
                });
                updateInterventionStep('contact', 'complete');
                updateInterventionStep('response', 'active');
                document.getElementById('response-time').textContent = '2.3 min';
            }, 9000);
            
            // Step 7: Student Response
            setTimeout(() => showAlert('contact-made', {
                icon: 'ðŸ“±',
                title: 'STUDENT CONTACTED',
                message: 'Counselor: "Hi, I\'m Dr. Chen. I\'m here to help."\nStudent: "Thank you for calling..."\nConnection established âœ“',
                type: 'success'
            }), 11000);
            
            // Step 8: Crisis Resolution
            setTimeout(() => {
                showAlert('resolution', {
                    icon: 'âœ…',
                    title: 'CRISIS PREVENTED',
                    message: 'Student safe and receiving support\nRisk level reduced to 15/100\nFollow-up scheduled',
                    type: 'success'
                });
                updateInterventionStep('response', 'complete');
                updateInterventionStep('resolution', 'complete');
                document.getElementById('intervention-status').textContent = 'RESOLVED';
                updateCrisisScore(15);
            }, 13000);
            
            // Step 9: Impact Summary
            setTimeout(() => showAlert('impact', {
                icon: 'ðŸ“Š',
                title: 'INTERVENTION SUCCESSFUL',
                message: 'Total response time: 2.3 minutes\nCrises prevented this month: 248\nStudent outcome: SAFE\n\nAnother life saved by AI',
                type: 'success'
            }), 15000);
        }
        
        function showAlert(id, alert) {
            const container = document.getElementById('intervention-sequence');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert-step ${alert.type}`;
            alertDiv.id = `alert-${id}`;
            
            alertDiv.innerHTML = `
                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                    <div style="font-size: 24px; margin-right: 15px;">${alert.icon}</div>
                    <div style="font-weight: bold; font-size: 16px;">${alert.title}</div>
                </div>
                <div style="font-size: 14px; line-height: 1.4; white-space: pre-line;">
                    ${alert.message}
                </div>
                <div style="font-size: 11px; opacity: 0.8; margin-top: 10px;">
                    ${new Date().toLocaleTimeString()} â€¢ MindfulCampus AI
                </div>
            `;
            
            container.appendChild(alertDiv);
            
            // Trigger animation
            setTimeout(() => {
                alertDiv.classList.add('show');
            }, 100);
            
            // Auto-remove after delay (except for critical ones)
            if (alert.type !== 'critical') {
                setTimeout(() => {
                    if (alertDiv.parentNode) {
                        alertDiv.style.opacity = '0';
                        alertDiv.style.transform = 'translateX(100%)';
                        setTimeout(() => {
                            if (alertDiv.parentNode) {
                                alertDiv.remove();
                            }
                        }, 500);
                    }
                }, 8000);
            }
        }
        
        function updateInterventionStep(stepId, status) {
            const step = interventionSteps.find(s => s.id === stepId);
            if (step) {
                step.status = status;
            }
        }
        
        function resetDemo() {
            const container = document.getElementById('intervention-sequence');
            container.innerHTML = '';
            
            document.getElementById('typing-area').value = '';
            document.getElementById('keywords-detected').textContent = '0';
            document.getElementById('response-time').textContent = '--';
            document.getElementById('intervention-status').textContent = 'MONITORING';
            
            interventionSteps.forEach(step => step.status = 'pending');
            updateCrisisScore(25);
        }
        
        // Initialize demo
        updateCrisisScore(25);
    </script>
</body>
</html>