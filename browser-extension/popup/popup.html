<!DOCTYPE html>
<html>
<head>
    <title>MindfulCampus</title>
    <style>
        body { width: 350px; height: 500px; margin: 0; background: linear-gradient(135deg, #667eea, #764ba2); color: white; font-family: Arial; padding: 15px; }
        button { background: rgba(255,255,255,0.2); border: none; color: white; padding: 10px; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: rgba(255,255,255,0.3); }
        .mood-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 15px 0; }
        .mood-btn { font-size: 24px; padding: 15px; }
        .message { position: fixed; top: 10px; left: 10px; right: 10px; background: #4CAF50; color: white; padding: 10px; border-radius: 5px; z-index: 1000; }
    </style>
</head>
<body>
    <h2>ğŸ§  MindfulCampus</h2>
    <p>Mental wellness companion</p>
    
    <h3>How are you feeling?</h3>
    <div class="mood-grid">
        <button class="mood-btn" onclick="recordMood('ğŸ˜Š', 'Happy')">ğŸ˜Š</button>
        <button class="mood-btn" onclick="recordMood('ğŸ˜', 'Neutral')">ğŸ˜</button>
        <button class="mood-btn" onclick="recordMood('ğŸ˜', 'Sad')">ğŸ˜</button>
        <button class="mood-btn" onclick="recordMood('ğŸ˜°', 'Stressed')">ğŸ˜°</button>
    </div>
    
    <div id="mood-status">Click a mood to record it</div>
    
    <h4>Quick Actions</h4>
    <button onclick="breathing()">ğŸ« Breathing Exercise</button>
    <button onclick="openDashboard()">ğŸ“Š Open Dashboard</button>
    <button onclick="getHelp()">ğŸ†˜ Get Help</button>
    
    <script>
        function showMessage(text) {
            // Remove existing messages
            let existing = document.querySelectorAll('.message');
            existing.forEach(el => el.remove());
            
            // Create new message
            let msg = document.createElement('div');
            msg.className = 'message';
            msg.textContent = text;
            document.body.appendChild(msg);
            
            // Remove after 3 seconds
            setTimeout(() => {
                if (msg.parentNode) msg.remove();
            }, 3000);
        }
        
        function recordMood(emoji, mood) {
            console.log('Mood clicked:', mood);
            document.getElementById('mood-status').textContent = 'Last mood: ' + emoji + ' ' + mood;
            showMessage('âœ… Mood recorded: ' + emoji + ' ' + mood);
            
            // Store in localStorage
            localStorage.setItem('lastMood', mood);
            localStorage.setItem('lastMoodTime', new Date().toISOString());
            
            // Special actions for different moods
            if (mood === 'Stressed' || mood === 'Sad') {
                setTimeout(() => {
                    showMessage('ğŸ’™ AI suggests: Try a breathing exercise');
                }, 2000);
            }
        }
        
        function breathing() {
            showMessage('ğŸ« Starting 4-7-8 breathing exercise...');
            let count = 4;
            let phase = 0; // 0=inhale, 1=hold, 2=exhale
            let phases = ['Breathe in', 'Hold', 'Breathe out'];
            let durations = [4, 7, 8];
            
            function breathCycle() {
                showMessage(phases[phase] + ' (' + count + ')');
                count--;
                
                if (count === 0) {
                    phase++;
                    if (phase >= 3) {
                        showMessage('âœ¨ Breathing complete! How do you feel?');
                        return;
                    }
                    count = durations[phase];
                }
                
                setTimeout(breathCycle, 1000);
            }
            
            breathCycle();
        }
        
        function openDashboard() {
            try {
                chrome.tabs.create({ url: 'http://localhost:3000' });
                window.close();
            } catch (error) {
                showMessage('ğŸ’¡ Dashboard: Open http://localhost:3000 in your browser');
            }
        }
        
        function getHelp() {
            let helpDiv = document.createElement('div');
            helpDiv.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000;">
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; color: black; padding: 20px; border-radius: 10px; text-align: center;">
                        <h3 style="color: #f44336;">ğŸ†˜ Get Help</h3>
                        <p>You're not alone. Help is available 24/7.</p>
                        <div style="margin: 15px 0;">
                            <strong>KIRAN Mental Health Helpline</strong><br>
                            <a href="tel:1800-599-0019" style="color: #f44336; font-size: 18px;">ğŸ“ 1800-599-0019</a><br>
                            <small>24/7 Free Support</small>
                        </div>
                        <button onclick="this.closest('div').closest('div').remove()" style="background: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px;">Close</button>
                    </div>
                </div>
            `;
            document.body.appendChild(helpDiv);
        }
        
        // Load last mood on startup
        window.onload = function() {
            let lastMood = localStorage.getItem('lastMood');
            if (lastMood) {
                document.getElementById('mood-status').textContent = 'Last mood: ' + lastMood;
            }
            showMessage('ğŸ§  MindfulCampus ready! How are you feeling?');
        };
    </script>
</body>
</html>